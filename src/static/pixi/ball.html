<div id="canvas3"></div>
<script>
    var app = new PIXI.Application(1024 / 2, 768 / 2, {backgroundColor : 0xFFFFFF});
    document.getElementById('canvas3').appendChild(app.view);
    let cooldown = 0;

    // Listen for animate update
    app.ticker.add(function(delta) {
        cooldown -= delta;
        if (cooldown < 0) {
            SpawnBall(Math.random() * 0.4 + 0.8, Math.random() * 0.4 + 0.8);
            cooldown = 10 + Math.random() * 20;
        }
    });

    function SpawnBall(xSpeed, yRebounce) {
        let ball = AddSprite('/Fatina/pixi/ball.png', app.stage, app.renderer.width - 50, 50, 1);

        // Fadein
        Fatina.tween(ball).from({ alpha: 0 }).to({ alpha: 1 }, 450).setEasing('outSine').start();

        // Move horizontaly
        Fatina.tween(ball).to({ x: - 100}, 5000 / xSpeed).start();
        Fatina.tween(ball).to({ rotation: -25 }, 5000).start();

        let sequence = Fatina.sequence();
        sequence.append(Fatina.tween(ball).to({ y: app.renderer.height - 50}, 800).setEasing('inCirc'));
        sequence.append(Fatina.tween(ball).to({ y: 100 / yRebounce }, 800).setEasing('outCirc'));
        sequence.append(Fatina.tween(ball).to({ y: app.renderer.height - 50}, 800).setEasing('inCirc'));
        sequence.append(Fatina.tween(ball).to({ y: 150 / yRebounce }, 800).setEasing('outCirc'));
        sequence.appendCallback(() => Fatina.tween(ball).to({ alpha: 0 }, 250).setEasing('inSine').start());
        sequence.append(Fatina.tween(ball).to({ y: app.renderer.height - 50}, 800).setEasing('inCirc'));
        sequence.append(Fatina.tween(ball).to({ y: 200 / yRebounce }, 800).setEasing('outCirc'));
        sequence.appendInterval(1500);
        sequence.onComplete(() => ball.destroy());
        sequence.start();
    }

    function AddSprite(path, container, x, y, scale) {
            var img = PIXI.Sprite.fromImage(path);
            img.alpha = 0;
            img.anchor.set(0.5);
            img.x = x;
            img.y = y;
            img.scale.x = scale;
            img.scale.y = scale;
            container.addChild(img);
            return img;
    }
</script>